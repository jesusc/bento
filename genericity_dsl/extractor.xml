<!--
	Auto-generated ant script that extracts a <file>.gbind.xmi into <file>.gbind.xmi.gbind
	It may be used in different ways:
		- As an example to write your own ant scripts that do further processing
		(e.g., injections, ATL transformations).
		- Called from another script
		- From the "AM3 Resource Navigator" view, and if the corresponding megamodel
		(megamodel.xmi) has been registered (via right-click action "Add megamodel"):
		by right-click action "Extract genericity_dsl Model to genericity_dsl File" on files
		with extension "gbind.xmi".
	
	Notes:
		- Property "MUri" is initialized by AM3 when invoked as a right-click injection
		action. In any other case (e.g., calling the ant script, copy-paste-modify), property
		"MUri" has to be defined explicitely.
		- This script creates uses extension "gbind.xmi.gbind" instead of
		simply "gbind" so that inadvertendly erasing a source file is less likely.
		- You may want to change some of the default options of the extractor (e.g., "indentString").
-->
<project name="genericity_dslExtractor" default="extraction">
	<property name="MUri" value="/genericity_dsl/Samples/Test1.gbind.xmi"/>

	<target name="extraction">
		<!-- Loading genericity_dsl metamodel -->
		<am3.loadModel modelHandler="EMF" name="genericity_dsl" metamodel="MOF" path="/genericity_dsl/Metamodel/genericity_dsl.ecore"/>

		<!-- Loading genericity_dsl model -->
		<am3.loadModel modelHandler="EMF" name="mygenericity_dsl" metamodel="genericity_dsl" path="${MUri}"/>

		<!-- Loading TCS metamodel -->
		<am3.loadModel modelHandler="EMF" name="TCS" metamodel="MOF" path="/AMMACore/TCS/Metamodel/TCS.ecore"/>

		<!-- Loading genericity_dsl.tcs model -->
		<am3.loadModel modelHandler="EMF" name="genericity_dsl.tcs" metamodel="TCS" path="/genericity_dsl/Syntax/genericity_dsl.tcs">
			<injector name="ebnf">
				<param name="name" value="TCS"/>
				<param name="parserGenerator" value="antlr3"/>
			</injector>
		</am3.loadModel>

		<!-- Saving genericity_dsl model -->
		<am3.saveModel model="mygenericity_dsl" path="${MUri}.gbind">
			<extractor name="ebnf">
				<param name="format" value="genericity_dsl.tcs"/>

				<param name="indentString" value="&#9;"/>
				<param name="identEsc" value="&quot;"/>
				<param name="stringDelim" value="&apos;"/>
				<param name="decimalFormat" value="0.##############"/>

				<param name="serializeComments" value="true"/>
			</extractor>
		</am3.saveModel>
	</target>

</project>
