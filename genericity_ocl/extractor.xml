<!--
	Auto-generated ant script that extracts a <file>.gocl.xmi into <file>.gocl.xmi.gocl
	It may be used in different ways:
		- As an example to write your own ant scripts that do further processing
		(e.g., injections, ATL transformations).
		- Called from another script
		- From the "AM3 Resource Navigator" view, and if the corresponding megamodel
		(megamodel.xmi) has been registered (via right-click action "Add megamodel"):
		by right-click action "Extract genericity_ocl Model to genericity_ocl File" on files
		with extension "gocl.xmi".
	
	Notes:
		- Property "MUri" is initialized by AM3 when invoked as a right-click injection
		action. In any other case (e.g., calling the ant script, copy-paste-modify), property
		"MUri" has to be defined explicitely.
		- This script creates uses extension "gocl.xmi.gocl" instead of
		simply "gocl" so that inadvertendly erasing a source file is less likely.
		- You may want to change some of the default options of the extractor (e.g., "indentString").
-->
<project name="genericity_oclExtractor" default="extraction">
	<property name="MUri" value="/genericity_ocl/Samples/Test1.gocl.xmi"/>

	<target name="extraction">
		<!-- Loading genericity_ocl metamodel -->
		<am3.loadModel modelHandler="EMF" name="genericity_ocl" metamodel="MOF" path="/genericity_ocl/Metamodel/genericity_ocl.ecore"/>

		<!-- Loading genericity_ocl model -->
		<am3.loadModel modelHandler="EMF" name="mygenericity_ocl" metamodel="genericity_ocl" path="${MUri}"/>

		<!-- Loading TCS metamodel -->
		<am3.loadModel modelHandler="EMF" name="TCS" metamodel="MOF" path="/AMMACore/TCS/Metamodel/TCS.ecore"/>

		<!-- Loading genericity_ocl.tcs model -->
		<am3.loadModel modelHandler="EMF" name="genericity_ocl.tcs" metamodel="TCS" path="/genericity_ocl/Syntax/genericity_ocl.tcs">
			<injector name="ebnf">
				<param name="name" value="TCS"/>
				<param name="parserGenerator" value="antlr3"/>
			</injector>
		</am3.loadModel>

		<!-- Saving genericity_ocl model -->
		<am3.saveModel model="mygenericity_ocl" path="${MUri}.gocl">
			<extractor name="ebnf">
				<param name="format" value="genericity_ocl.tcs"/>

				<param name="indentString" value="&#9;"/>
				<param name="identEsc" value="&quot;"/>
				<param name="stringDelim" value="&apos;"/>
				<param name="decimalFormat" value="0.##############"/>

				<param name="serializeComments" value="true"/>
			</extractor>
		</am3.saveModel>
	</target>

</project>
