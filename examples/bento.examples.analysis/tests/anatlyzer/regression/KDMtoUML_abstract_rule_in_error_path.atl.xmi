<?xml version="1.0" encoding="ISO-8859-1"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:atl="http://www.eclipse.org/gmt/2005/ATL" xmlns:ocl="http://www.eclipse.org/gmt/2005/OCL">
  <atl:Module location="8:1-57:2" name="KDMtoUML">
    <commentsBefore>-- @atlcompiler atl2006 </commentsBefore>
    <commentsBefore>-- @nsURI uml=http://www.eclipse.org/uml2/2.1.0/UML</commentsBefore>
    <commentsBefore>-- @nsURI kdm=http://www.eclipse.org/MoDisco/kdm</commentsBefore>
    <commentsBefore>--</commentsBefore>
    <commentsBefore>-- Tests abstract rules in the path of an error.</commentsBefore>
    <commentsBefore>-- </commentsBefore>
    <inModels location="9:29-9:43" name="kdmInput" metamodel="/2"/>
    <outModels location="9:8-9:23" name="umlOutput" metamodel="/1"/>
    <elements xsi:type="atl:Helper" location="12:1-13:29">
      <commentsBefore>-- ERROR: Operation getMethodVisibility expected in Element but found in subtype MethodUnit. </commentsBefore>
      <commentsAfter>--  Original code:</commentsAfter>
      <commentsAfter>-- </commentsAfter>
      <commentsAfter>--	if (self.oclIsTypeOf(kdm!MethodUnit)) then</commentsAfter>
      <commentsAfter>--		self.getMethodVisibility()</commentsAfter>
      <commentsAfter>--	else</commentsAfter>
      <commentsAfter>--		if (self.oclIsTypeOf(kdm!Datatype)) then</commentsAfter>
      <commentsAfter>--		 	self->getDatatypeVisibility()</commentsAfter>
      <commentsAfter>--		else</commentsAfter>
      <commentsAfter>--			#public</commentsAfter>
      <commentsAfter>--		endif</commentsAfter>
      <commentsAfter>--	endif;</commentsAfter>
      <definition location="12:8-13:28">
        <feature xsi:type="ocl:Operation" location="12:34-13:28" name="getVisibility">
          <returnType xsi:type="ocl:OclModelElement" location="12:52-12:70" name="VisibilityKind" model="/4"/>
          <body xsi:type="ocl:OperationCallExp" location="13:2-13:28" operationName="getMethodVisibility">
            <source xsi:type="ocl:VariableExp" location="13:2-13:6" referredVariable="/5"/>
          </body>
        </feature>
        <context_ location="12:8-12:27">
          <context_ xsi:type="ocl:OclModelElement" location="12:16-12:27" name="Element" model="/3"/>
        </context_>
      </definition>
    </elements>
    <elements xsi:type="atl:Helper" location="26:1-35:8">
      <commentsBefore>--  Original code:</commentsBefore>
      <commentsBefore>-- </commentsBefore>
      <commentsBefore>--	if (self.oclIsTypeOf(kdm!MethodUnit)) then</commentsBefore>
      <commentsBefore>--		self.getMethodVisibility()</commentsBefore>
      <commentsBefore>--	else</commentsBefore>
      <commentsBefore>--		if (self.oclIsTypeOf(kdm!Datatype)) then</commentsBefore>
      <commentsBefore>--		 	self->getDatatypeVisibility()</commentsBefore>
      <commentsBefore>--		else</commentsBefore>
      <commentsBefore>--			#public</commentsBefore>
      <commentsBefore>--		endif</commentsBefore>
      <commentsBefore>--	endif;</commentsBefore>
      <definition location="26:8-35:7">
        <feature xsi:type="ocl:Operation" location="26:37-35:7" name="getMethodVisibility">
          <returnType xsi:type="ocl:OclModelElement" location="26:61-26:79" name="VisibilityKind" model="/7"/>
          <body xsi:type="ocl:IfExp" location="27:2-35:7">
            <thenExpression xsi:type="ocl:EnumLiteralExp" location="28:3-28:11" name="private"/>
            <condition xsi:type="ocl:OperatorCallExp" location="27:6-27:28" operationName="=">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="27:6-27:17" name="export">
                <source xsi:type="ocl:VariableExp" location="27:6-27:10" referredVariable="/8"/>
              </source>
              <arguments xsi:type="ocl:EnumLiteralExp" location="27:20-27:28" name="private"/>
            </condition>
            <elseExpression xsi:type="ocl:IfExp" location="30:3-34:8">
              <thenExpression xsi:type="ocl:EnumLiteralExp" location="31:4-31:14" name="protected"/>
              <condition xsi:type="ocl:OperatorCallExp" location="30:7-30:31" operationName="=">
                <source xsi:type="ocl:NavigationOrAttributeCallExp" location="30:7-30:18" name="export">
                  <source xsi:type="ocl:VariableExp" location="30:7-30:11" referredVariable="/9"/>
                </source>
                <arguments xsi:type="ocl:EnumLiteralExp" location="30:21-30:31" name="protected"/>
              </condition>
              <elseExpression xsi:type="ocl:EnumLiteralExp" location="33:4-33:11" name="public"/>
            </elseExpression>
          </body>
        </feature>
        <context_ location="26:8-26:30">
          <context_ xsi:type="ocl:OclModelElement" location="26:16-26:30" name="MethodUnit" model="/6"/>
        </context_>
      </definition>
    </elements>
    <elements xsi:type="atl:MatchedRule" location="38:1-44:2" name="KDMEntityToNamedElement" children="/0/@elements.3 /0/@elements.4" isAbstract="true">
      <outPattern location="40:2-43:3">
        <elements xsi:type="atl:SimpleOutPatternElement" location="40:5-43:3" varName="tgt">
          <type xsi:type="ocl:OclModelElement" location="40:10-40:26" name="NamedElement" model="/11"/>
          <bindings location="41:3-41:19" propertyName="name">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="41:11-41:19" name="name">
              <source xsi:type="ocl:VariableExp" location="41:11-41:14" referredVariable="/0/@elements.2/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="42:4-42:37" propertyName="visibility">
            <value xsi:type="ocl:OperationCallExp" location="42:18-42:37" operationName="getVisibility">
              <source xsi:type="ocl:VariableExp" location="42:18-42:21" referredVariable="/0/@elements.2/@inPattern/@elements.0"/>
            </value>
          </bindings>
        </elements>
      </outPattern>
      <inPattern location="39:2-39:25">
        <elements xsi:type="atl:SimpleInPatternElement" location="39:7-39:25" varName="src" variableExp="/0/@elements.2/@outPattern/@elements.0/@bindings.0/@value/@source /0/@elements.2/@outPattern/@elements.0/@bindings.1/@value/@source">
          <type xsi:type="ocl:OclModelElement" location="39:12-39:25" name="KDMEntity" model="/10"/>
        </elements>
      </inPattern>
    </elements>
    <elements xsi:type="atl:MatchedRule" location="46:1-51:2" name="InventoryItemToArtifact" superRule="/0/@elements.2">
      <outPattern location="48:2-50:3">
        <elements xsi:type="atl:SimpleOutPatternElement" location="48:5-50:3" varName="tgt">
          <type xsi:type="ocl:OclModelElement" location="48:10-48:22" name="Artifact" model="/13"/>
        </elements>
      </outPattern>
      <inPattern location="47:2-47:29">
        <elements xsi:type="atl:SimpleInPatternElement" location="47:7-47:29" varName="src">
          <type xsi:type="ocl:OclModelElement" location="47:12-47:29" name="InventoryItem" model="/12"/>
        </elements>
      </inPattern>
    </elements>
    <elements xsi:type="atl:MatchedRule" location="52:1-57:2" name="InventoryContainerToPackage" superRule="/0/@elements.2">
      <outPattern location="54:2-56:3">
        <elements xsi:type="atl:SimpleOutPatternElement" location="54:5-56:3" varName="tgt">
          <type xsi:type="ocl:OclModelElement" location="54:10-54:21" name="Package" model="/15"/>
        </elements>
      </outPattern>
      <inPattern location="53:2-53:34">
        <elements xsi:type="atl:SimpleInPatternElement" location="53:7-53:34" varName="src">
          <type xsi:type="ocl:OclModelElement" location="53:12-53:34" name="InventoryContainer" model="/14"/>
        </elements>
      </inPattern>
    </elements>
  </atl:Module>
  <ocl:OclModel location="9:20-9:23" name="uml" model="/0/@outModels.0"/>
  <ocl:OclModel location="9:40-9:43" name="kdm" model="/0/@inModels.0"/>
  <ocl:OclModel location="12:16-12:19" name="kdm" elements="/0/@elements.0/@definition/@context_/@context_"/>
  <ocl:OclModel location="12:52-12:55" name="uml" elements="/0/@elements.0/@definition/@feature/@returnType"/>
  <ocl:VariableDeclaration location="13:2-13:6" varName="self" variableExp="/0/@elements.0/@definition/@feature/@body/@source"/>
  <ocl:OclModel location="26:16-26:19" name="kdm" elements="/0/@elements.1/@definition/@context_/@context_"/>
  <ocl:OclModel location="26:61-26:64" name="uml" elements="/0/@elements.1/@definition/@feature/@returnType"/>
  <ocl:VariableDeclaration location="27:6-27:10" varName="self" variableExp="/0/@elements.1/@definition/@feature/@body/@condition/@source/@source"/>
  <ocl:VariableDeclaration location="30:7-30:11" varName="self" variableExp="/0/@elements.1/@definition/@feature/@body/@elseExpression/@condition/@source/@source"/>
  <ocl:OclModel location="39:12-39:15" name="kdm" elements="/0/@elements.2/@inPattern/@elements.0/@type"/>
  <ocl:OclModel location="40:10-40:13" name="uml" elements="/0/@elements.2/@outPattern/@elements.0/@type"/>
  <ocl:OclModel location="47:12-47:15" name="kdm" elements="/0/@elements.3/@inPattern/@elements.0/@type"/>
  <ocl:OclModel location="48:10-48:13" name="uml" elements="/0/@elements.3/@outPattern/@elements.0/@type"/>
  <ocl:OclModel location="53:12-53:15" name="kdm" elements="/0/@elements.4/@inPattern/@elements.0/@type"/>
  <ocl:OclModel location="54:10-54:13" name="uml" elements="/0/@elements.4/@outPattern/@elements.0/@type"/>
</xmi:XMI>
